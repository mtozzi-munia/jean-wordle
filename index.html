<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wordle Fran√ßais - Choix de Difficult√©</title>
    <style>
        :root {
            --correct: #538d4e; /* Vert */
            --present: #2196F3; /* Bleu (Votre demande) */
            --absent: #3a3a3c;
            --default: #121213;
            --text: #ffffff;
            --border: #3a3a3c;
        }

        body {
            background-color: var(--default);
            color: var(--text);
            font-family: 'Helvetica Neue', Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            height: 100vh;
        }

        h1 {
            margin: 10px 0;
            font-size: 2rem;
            border-bottom: 1px solid var(--border);
            padding-bottom: 10px;
        }

        /* Grille de jeu */
        #board {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            grid-gap: 5px;
            padding: 10px;
            box-sizing: border-box;
            width: 350px;
            height: 420px;
        }

        .tile {
            border: 2px solid var(--border);
            display: inline-flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            font-weight: bold;
            text-transform: uppercase;
            user-select: none;
        }

        /* Animations et Couleurs */
        .correct { background-color: var(--correct); border-color: var(--correct); }
        .present { background-color: var(--present); border-color: var(--present); }
        .absent { background-color: var(--absent); border-color: var(--absent); }
        
        .active { border-color: #818384; }

        /* Clavier Virtuel */
        #keyboard {
            margin-top: auto;
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .row {
            display: flex;
            gap: 6px;
        }

        .key {
            background-color: #818384;
            color: white;
            font-weight: bold;
            padding: 15px;
            border-radius: 4px;
            cursor: pointer;
            text-transform: uppercase;
            user-select: none;
            min-width: 20px;
            text-align: center;
        }

        .key-large {
            padding: 15px 20px;
            font-size: 12px;
        }

        /* Modal de Difficult√© */
        #modal {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }

        .modal-content {
            background: #2c2c2e;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #555;
        }

        .btn {
            display: block;
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: none;
            border-radius: 5px;
            font-size: 1.2rem;
            cursor: pointer;
            color: white;
            font-weight: bold;
        }

        .btn-easy { background-color: #4CAF50; }
        .btn-medium { background-color: #FF9800; }
        .btn-hard { background-color: #F44336; }

        #message {
            height: 30px;
            margin-top: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>

<title.>Simon is the goat</title.>

    <div id="modal">
        <div class="modal-content">
            <h2>Choisissez le niveau</h2>
            <button class="btn btn-easy" onclick="startGame('facile')">Facile (Mots courants)</button>
            <button class="btn btn-medium" onclick="startGame('moyen')">Interm√©diaire (Classique)</button>
            <button class="btn btn-hard" onclick="startGame('difficile')">Difficile (Mots rares)</button>
        </div>
    </div>

    <h1>LE WORDLE</h1>
    <div id="message"></div>
    <div id="board"></div>

    <div id="keyboard">
        <div class="row" id="row1"></div>
        <div class="row" id="row2"></div>
        <div class="row" id="row3"></div>
    </div>

    <script>
        // --- BASES DE DONN√âES DE MOTS (√âchantillons) ---
        const wordsEasy = [
            "POMME", "TABLE", "LIVRE", "CHIEN", "CHAT", "FLEUR", "MONDE", "PORTE", "TERRE", "FRUIT",
            "ARBRE", "ROUTE", "ECOLE", "PLAGE", "ROUGE", "VERTE", "BLEUE", "BLANC", "NOIRE", "LAPIN",
            "POULE", "AVION", "TRAIN", "VIVRE", "AIMER", "JOUER", "SALLE", "LAMPE", "VERRE", "CHAIS"
        ];
        
        const wordsMedium = [
            "GLOIRE", "CRANE", "FUSER", "LOURD", "POINT", "AUDIO", "OLIVE", "QUOTA", "RIVAL", "SUCRE",
            "TARTE", "USINE", "VALSE", "WAGON", "XENON", "YOGIT", "ZEBRE", "ATOME", "BIJOU", "CANOE",
            "DUREE", "ECLAT", "FIBRE", "GAZON", "HOTEL", "IMAGE", "JEUNE", "KOALA", "LASER", "METRO"
        ]; // Note: m√©lang√©s avec des mots plus vari√©s

        const wordsHard = [
            "XYLEM", "FJORD", "HAIRE", "IGLOO", "JAZZY", "KAPOK", "QUIPU", "WHIGS", "VROOM", "THUYA",
            "SQUAT", "PHLOX", "OVULE", "NUEES", "MYRTE", "LYRA", "KYSTE", "JULEP", "IODES", "GNOUS",
            "FLUX", "EXIGU", "DRUPE", "CYCAS", "BRETZ", "AZUR", "AIUX", "AWACS", "BOXON"
        ];

        // Normalisation √† 5 lettres (au cas o√π) et majuscules
        const cleanList = (list) => list.filter(w => w.length === 5).map(w => w.toUpperCase());

        let targetWord = "";
        let currentAttempt = 0;
        let currentLetter = 0;
        let gameOver = false;
        const maxAttempts = 6;
        const wordLength = 5;

        // Grille logique
        let board = [
            ["", "", "", "", ""],
            ["", "", "", "", ""],
            ["", "", "", "", ""],
            ["", "", "", "", ""],
            ["", "", "", "", ""],
            ["", "", "", "", ""]
        ];

        function startGame(difficulty) {
            let wordPool;
            if (difficulty === 'facile') wordPool = cleanList(wordsEasy);
            else if (difficulty === 'moyen') wordPool = cleanList(wordsEasy.concat(wordsMedium));
            else wordPool = cleanList(wordsHard);

            targetWord = wordPool[Math.floor(Math.random() * wordPool.length)];
            console.log("Solution (chut!) : " + targetWord); // Pour tricher/tester console du navigateur

            document.getElementById('modal').style.display = 'none';
            initBoard();
            initKeyboard();
            document.addEventListener('keydown', handleKeydown);
        }

        function initBoard() {
            const boardEl = document.getElementById('board');
            boardEl.innerHTML = '';
            for (let i = 0; i < maxAttempts; i++) {
                for (let j = 0; j < wordLength; j++) {
                    let tile = document.createElement('div');
                    tile.id = i + '-' + j;
                    tile.classList.add('tile');
                    boardEl.appendChild(tile);
                }
            }
        }

        function initKeyboard() {
            const keys1 = "AZERTYUIOP".split("");
            const keys2 = "QSDFGHJKLM".split("");
            const keys3 = "WXCVBN".split("");
            
            createKeyboardRow(keys1, 'row1');
            createKeyboardRow(keys2, 'row2');
            
            const row3 = document.getElementById('row3');
            
            // Touche Entr√©e
            let enterKey = document.createElement('div');
            enterKey.innerText = "ENTR√âE";
            enterKey.classList.add('key', 'key-large');
            enterKey.onclick = submitGuess;
            row3.appendChild(enterKey);

            keys3.forEach(key => {
                let keyEl = document.createElement('div');
                keyEl.innerText = key;
                keyEl.classList.add('key');
                keyEl.id = 'key-' + key;
                keyEl.onclick = () => handleInput(key);
                row3.appendChild(keyEl);
            });

            // Touche Effacer
            let delKey = document.createElement('div');
            delKey.innerText = "‚å´";
            delKey.classList.add('key', 'key-large');
            delKey.onclick = deleteLetter;
            row3.appendChild(delKey);
        }

        function createKeyboardRow(keys, rowId) {
            let row = document.getElementById(rowId);
            keys.forEach(key => {
                let keyEl = document.createElement('div');
                keyEl.innerText = key;
                keyEl.classList.add('key');
                keyEl.id = 'key-' + key;
                keyEl.onclick = () => handleInput(key);
                row.appendChild(keyEl);
            });
        }

        function handleKeydown(e) {
            if (gameOver) return;
            let key = e.key.toUpperCase();
            if (key === "ENTER") submitGuess();
            else if (key === "BACKSPACE") deleteLetter();
            else if (/^[A-Z]$/.test(key)) handleInput(key);
        }

        function handleInput(letter) {
            if (currentLetter < wordLength && currentAttempt < maxAttempts) {
                board[currentAttempt][currentLetter] = letter;
                let tile = document.getElementById(currentAttempt + '-' + currentLetter);
                tile.innerText = letter;
                tile.classList.add('active');
                currentLetter++;
            }
        }

        function deleteLetter() {
            if (currentLetter > 0) {
                currentLetter--;
                board[currentAttempt][currentLetter] = "";
                let tile = document.getElementById(currentAttempt + '-' + currentLetter);
                tile.innerText = "";
                tile.classList.remove('active');
            }
        }

        function submitGuess() {
            if (currentLetter !== wordLength) {
                showMessage("Pas assez de lettres !");
                return;
            }

            let guess = board[currentAttempt].join("");
            checkWord(guess);

            currentAttempt++;
            currentLetter = 0;

            if (guess === targetWord) {
                showMessage("Bravo ! Gagn√© ! üéâ");
                gameOver = true;
            } else if (currentAttempt === maxAttempts) {
                showMessage("Perdu ! Le mot √©tait : " + targetWord);
                gameOver = true;
            }
        }

        function showMessage(msg) {
            let m = document.getElementById('message');
            m.innerText = msg;
            setTimeout(() => { if(!gameOver) m.innerText = ""; }, 2000);
        }

        function checkWord(guess) {
            let guessArr = guess.split("");
            let targetArr = targetWord.split("");
            let targetFreq = {};

            // Calculer la fr√©quence des lettres dans le mot cible
            for (let char of targetArr) {
                targetFreq[char] = (targetFreq[char] || 0) + 1;
            }

            let colors = new Array(5).fill('absent');

            // 1. V√©rifier les verts (bon endroit)
            for (let i = 0; i < 5; i++) {
                if (guessArr[i] === targetArr[i]) {
                    colors[i] = 'correct';
                    targetFreq[guessArr[i]]--;
                    updateKeyColor(guessArr[i], 'correct');
                }
            }

            // 2. V√©rifier les bleus (mauvais endroit)
            for (let i = 0; i < 5; i++) {
                if (colors[i] === 'absent') { // Si pas d√©j√† vert
                    if (targetFreq[guessArr[i]] > 0) {
                        colors[i] = 'present'; // BLEU
                        targetFreq[guessArr[i]]--;
                        updateKeyColor(guessArr[i], 'present');
                    } else {
                        updateKeyColor(guessArr[i], 'absent');
                    }
                }
            }

            // Appliquer les couleurs
            for (let i = 0; i < 5; i++) {
                let tile = document.getElementById(currentAttempt + '-' + i);
                // Petite animation d√©lai
                setTimeout(() => {
                    tile.classList.add(colors[i]);
                    tile.style.color = 'white';
                    tile.style.border = 'none';
                }, i * 100);
            }
        }

        function updateKeyColor(letter, status) {
            let key = document.getElementById('key-' + letter);
            if (!key) return;

            // Priorit√© des couleurs : Correct > Present > Absent
            if (status === 'correct') {
                key.className = 'key correct';
            } else if (status === 'present' && !key.classList.contains('correct')) {
                key.className = 'key present';
            } else if (status === 'absent' && !key.classList.contains('correct') && !key.classList.contains('present')) {
                key.className = 'key absent';
            }
        }
    </script>
</body>
</html>
